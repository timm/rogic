\usepackage{tex4log/fancyvrb}

\newcommand{\n}{{\tt $\smallsetminus$n}}
%\newcommand{\+}{{\tt $\smallsetminus$+}}

\newcommand{\MARK}[1]{\label{line:#1}$\blacktriangleleft\dotfill$~{\em {\protect{\ref{line:#1}}}}}
\newcommand{\Line}[1]{\mbox{line \ref{line:#1}}}
\newcommand{\LINE}[1]{\mbox{Line \ref{line:#1}}}
\newcommand{\Where}[2]{{\mbox{line \ref{line:#1:#2}} in \fig{#1}}}
\newcommand{\WHERE}[2]{{\mbox{Line \ref{line:#1:#2}} in \fig{#1}}}

\newcommand{\code}[2]{%
     \begin{figure}[!t]%
        \fvset{  samepage=true,%
                 fontsize=\scriptsize,%
                 commandchars=\\\{\},%
                 framesep=2mm,%
                 label={\small{\textit{#1}}},%
                 labelposition=topline,%
                 %numbersep=1pt,%
                 %stepnumber=5%
                 %numbers=left,%
                 frame=single%              
                 }%
            {\bf \VerbatimInput{#1}}
    \caption[#1]{#2}\label{fig:#1}%
    \end{figure}%
}

\def\Tex4Log{\kern-.08emT\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX\kern-.2em\lower-.3ex\hbox{{4}}\kern-.05emL\kern-.32em\lower-1ex\hbox{o}\kern-.025emG}


\newcommand{\corefile}[1]{See  \protect\fig{#1eg.pl} for sample usage.}
\newcommand{\generates}[1]{Starlog sample; generates \protect\fig{#1eg.spy}.}
\newcommand{\outputfrom}[1]{Output from \protect\fig{#1eg.pl}.}

\newcommand{\showtell}[1]{%
    \peektell{#1}%
     \code{#1.pl}{\protect\corefile{#1}}}

\newcommand{\peektell}[1]{%
     \IfFileExists{#1eg.pl}{\code{#1eg.pl}{\protect\generates{#1}}}%
     \IfFileExists{#1eg.spy}{\code{#1eg.spy}{\protect\outputfrom{#1}}}}
